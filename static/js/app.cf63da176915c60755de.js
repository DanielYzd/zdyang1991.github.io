webpackJsonp([1],{"3FjS":function(e,t){},"3qkD":function(e,t){},"7Otq":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK0AAAATCAYAAADib41GAAAHlElEQVRogdWbS4gcVRSGv6Oj4kZt1KAGXyOIuvCVuBLBR8/SJ0wi6iKKTHChIAiZ7ERczCAixNWMDxBEMY3g2rQPJLgIaYkbQdT2Aa4iqUkUBRWPi7p3+tStc6tqkh4fPxQ1ffvc/55bde6555zbI6qq5HG/iLynqkeAGzIyfwF3icjHDTyo6lbgc+D8BrGeiKyp6hpwbhNfAmkVkLqIqvaBWaAXrgIYA0MRKYxcD+g7tGMRGTmcPWf8QQtXxEhExoZvG7At6EnQsQAGVseuMOPHeUe+YTJuH5g3XRdFpFDVlUTX1Y3qcMrQZtwXZI60yP2oqhc0jHG6qn7UwqGqel6QX+sga0Hblegzq6qHG/iOaWksUX4hI7fkzPWYx9eBK8KOe6Crjh3f9VLL2H0ju2K/CG29RL42/38Cp02J5xLgdVXNeby9wO1TGmsa2E/pvXLoAQvmcyfjUNV5HC9L6b27co0D1xLNHrlH1RO26bYA7GkRs3OeNX+PnDbbvmlQ1T1hsS2F58vMFPnvBp4E9iWD3go8O8VxTglh4tZwCmAQ2mz7bObvJlgjKpgYsH253ouP23xhtvyFRG6Z+mLyFkgOKd+IcoFYnS2ffRZjc9/utG8KtAxlrDdfBgYzlHFmDsfD/ctwvw44o0H+BVX9RESOmEHfBk5v0e8D4BDwW/h8C7AVuDjcLzKfbwLOaeFrQuq9lkVkOWy1h027jRftCxzheEutxqpjfE+VcgHssLFk4NpG1YCGIrKoqrNUja+T0QTd0nHnwj1daIRx7PgjgLCgNt27GqQ6jwBmROTGtp4ishNAVb8DLm8QPRN4R1W3icgvwKvApR2Ue1xEvjPjfQV85Qmq6nvAvR04c0gfxDDcUw8Yt+n0BY4dDigN1npWy5fjKlKDzehot+ex096GdKGOQlLVNE6tPVlMRUMSOktIakVkmMhYjrGIjHWSEI8iZ3hWqd49Ve3PqOpZwBPORN8XkS+c9jZcDbysqoeAB06ifxu+pXl3aEP6oqIRjJh4H9tuX2BB3rtZDzii6sE2GhOmcj2AYABXZfo0ITfngnLLjYgGlpM/wMTgVoHdsG6I+x29UdUxsN2EPZZjMQ3XVHUuzHOJesy+AhQzwNnAS7VpwqNAF6O1sVvELuARR/YocKHTflBV/3TaT4jI9bZBRJ5OhbSxaleRq72M+DCDx2vzeq7BJqHBkMTLmheWjt8zGXghItGA0ue5EDzPgJMrdbmLJcx5sUW+CN7Q23Hi3FODtTYRQ5plh2MP9bn2qT9Di/E0ErE3gWuoeimoJ3nfA88BrzkcWzPcxzPtJwt3OwyZtUUR66p0MFqqHmGQfG6qHNjkb8jE63nj9MO1oqrLIuIZWw65MKCLfNsuMZ98NyciQ1U9bHiiYXqh2Ri/qrFK6Vmt7IApGe1fwEPAEfLG9wewg7I09m+iFrcG77uStI8oH1DaZ4SfsUcjjZUIm/E2VQ4qupi/VylfcK6ktUdVR2ZhZRE8oRuvN8BbqDnDt3FnYWLYSuwe7qkeceFZo43jDRPZYTzImErJS0R+UtUHgY8ynM+IyCENhxX/IrwH7yVVuWy/loQlCcOQyelaGxeEmDCVC9v/jsA9Hy7PSw8a6q9jEZmjbii55M/OxyLqVSkTmhClkiyp6v7wZy0RdTjGsfbqjJeN/6dWpxWRg6q6F3gh+epdEdnn9TG4AfjBaa8Fq6r6FHBz0ryro5o5o02NN8ZrXkKSttmHvup8n+VqOwINxrVMGQ8eIPFq4W6PeC08Y1tvNwsiYhgy9y4VBcthF2juwMMz2px+bZ59qocLAC8CtwH3hM9fA4916HdCRNY6jnEn9ZLXrrZOYZv0yk2x5NIax4nIyPEM66FBiOWW0j4eF/mkLj0JmzP1Udse+/cyXG1G0acaxsScpIsRNXnDWpKYeQZeWy5ptZ69m9Gq6kvAlcAW5+u7VfUK4EMR2aequ4DPKA8C5kXkhKreCTwV2jw8r6qfAq+IyB/hOHhLkE8PGLZnONqQexmQ34rakjCbSLUlbl2TIbuAisxLXOcWkR0Znoguc7PtNSPK7Dgex+60dhvRkSMX/1c4u3raO8j/yms2XGtQxmOquhO4Np6MAZfRfCDwcLjeCjxHaf412MmgFtuBW8QeGUPx4jIL2y9u9V1eApQeft3zZ8bM6Vgr7DfAnTf5OXuLLmf4aVIaQ6FvTJ9BWFg1DidJzC3yivee1g9mKhCRQyLyxilQTDts8dDX8tdX3yTtNmvNGWCKcQgd3ONPhwvKisWxeJkEyPaf7aBjG1LD2h84rbEMwa00tIUYKfdSiL1r3BmO3Mlb2t4PvzrrwSYZ7X8UnqdMH/r6CVGLF0gRvWzuKNgrO1XGNRl9Oo6n40ZqtN5iS8tRsT7cKUwyXjnVdYF6suiGTYGjKWRL9V2I43Y12p8pC/1N168N/X/v0P84k2pBF1l7tSLUDxdxEoWAIZOkBzZW2/ReDOQTlhTWsHY3jBV13Mivq3aT3yXSOeeMyI0vwwlerlY8pHp82+rBY8gT5pfyTsbtegT6f4f9z4VkGy9IstP/Aqato6merP+3wrTmvFncZoeqcP4NTC/k4hNBNw0AAAAASUVORK5CYII="},"8TJq":function(e,t){},BWMH:function(e,t){},DyUH:function(e,t){},IS4w:function(e,t){},N5EC:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("transition",{attrs:{name:"el-fade-in"}},[t("router-view")],1)],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},o,!1,function(e){a("wxfT")},null,null).exports,i=a("/ocq"),r=a("Xxa5"),l=a.n(r),c=a("mvHQ"),u=a.n(c),d=a("exGp"),p=a.n(d),h=a("woOf"),g=a.n(h),f=a("//Fk"),v=a.n(f),m=a("fZjL"),b=a.n(m),_=a("mtWM"),C=a.n(_),w=(a("mw3O"),a("zL8q")),y=a.n(w);C.a.defaults.withCredentials=!0;var S=function(e,t){var a={};C.a.interceptors.request.use(function(e){return a[e.url]?(a[e.url]("操作取消"),a[e.url]=void 0):a[e.url]=void 0,e},function(e){return v.a.reject(e)});var s={siteCode:window.localStorage.getItem("terminal")?JSON.parse(window.localStorage.getItem("terminal")).siteCode:"",sessionId:window.localStorage.getItem("sessionId")};t=g()(s,t);var o={method:e.method,url:e.url,timeout:1e4,data:u()(t),params:t,headers:"get"==e.method?{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json; charset=UTF-8"}};return"get"==e.method?delete o.data:delete o.params,new v.a(function(e,t){C()(o).then(function(t){!function(e){"0"!=e.data.returnCode&&Object(w.Message)({message:e.data.errorMessage,type:"error"})}(t),e(t)}).catch(function(e){!function(e){if(console.log(e),e&&(200===e.status||304===e.status||400===e.status))return e;Object(w.Message)({message:"服务器异常,请稍候再试",type:"error"})}(e),t(e)})})},I=a("Dd8w"),N=a.n(I),M="http://10.200.188.232:8021/",O="http://10.200.188.232:8041/pcs/",E={saveSystemCom:{url:M+"restful/cm/saveTerminalunit",method:"post"},logIn:{url:M+"restful/doLogin",method:"get"},logout:{url:M+"restful/loginOut",method:"get"},getinitializeTable:{url:O+"restful/pp/getProcutionOrderQueue",method:"get"},getHistoryInfo:{url:O+"restful/pp/getProductionStnRecords",method:"get"},getServertime:{url:M+"restful/cm/getServerTime",method:"get"},getAssemblyData:{url:O+"restful/pp/getProcutionOrderQueue",method:"get"},validMachiningProductRecord:{url:O+"restful/pp/validMachiningProductRecord",method:"post"},getSerialNoInformation:{url:O+"restful/pp/getSerialNoInformation",method:"get"},getCurrentProductionOrder:{url:O+"restful/pp/getCurrentProductionOrder",method:"get"},materialSole:{url:O+"restful/pp/assemblyUniqueCheck",method:"get"},getMachiningProductionQueue:{url:O+"restful/pp/getMachiningProductionQueue",method:"get"},getPalletizedRecords:{url:O+"restful/pp/getPalletizedRecords",method:"get"},getMaterialByCode:{url:O+"restful/cm/getMaterialByCode",method:"get"},updateMachiningProduction:{url:O+"restful/pp/updateMachiningProduction",method:"post"},batchSavePartsData:{url:O+"restful/pp/batchMachiningPartsData",method:"post"}},R=N()({},E),T={data:function(){return{form:{userCode:"",password:"",siteCode:"1001"},MenuListData:[],rule:{nameRule:[{required:!0,message:"账号不能为空"}],passwordRule:[{required:!0,message:"密码不能为空"}]},loadingFlag:!1}},methods:{onSubmit:function(e){var t,a=this;this.$refs[e].validate((t=p()(l.a.mark(function e(t){var s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&(s=a,S(R.logIn,s.form).then(function(e){console.log(e),sessionStorage.setItem("userCode",s.form.userCode),sessionStorage.setItem("password",s.form.password);var t=u()(e.data.data.menus);if(window.localStorage.setItem("list",t),window.localStorage.setItem("sessionId",e.data.data.sessionId),window.localStorage.setItem("terminal",u()(e.data.data.terminal)),window.localStorage.setItem("serialPort",u()(e.data.data.serialPort)),0==e.data.returnCode){var o=e.data.data.serialPort;null!=o&&void 0!=o&&""!=o||(console.log(o),a.$router.push("/system"));var n=e.data.data.terminal.homePage;null==n||void 0==n||""==n?(a.$message({message:"请联系管理员配置首页！",type:"warning"}),a.$router.push("/home")):a.$router.push(e.data.data.terminal.homePage)}}));case 1:case"end":return e.stop()}},e,a)})),function(e){return t.apply(this,arguments)}))}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login11"},[a("div",{staticClass:"login"},[e._m(0),e._v(" "),a("div",{staticClass:"sr"},[a("el-form",{ref:"form",attrs:{model:e.form}},[a("el-form-item",{attrs:{prop:"userCode",rules:e.rule.nameRule}},[a("el-input",{ref:"form.usrCode",attrs:{autofocus:!0,placeholder:"用户名",icon:"pad-user"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit("form")}},model:{value:e.form.userCode,callback:function(t){e.$set(e.form,"userCode",t)},expression:"form.userCode"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password",rules:e.rule.passwordRule}},[a("el-input",{attrs:{placeholder:"密码",icon:"pad-password"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit("form")}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("登录")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("h1",[this._v("DMES")])])}]};var k=a("VU/8")(T,D,!1,function(e){a("m5gs")},null,null).exports;function A(e){var t=new Date;e&&(t=new Date(e));var a={};return a.year=t.getFullYear(),a.month=P(t.getMonth()+1),a.day=P(t.getDate()),a.hour=P(t.getHours()),a.minute=P(t.getMinutes()),a.second=P(t.getSeconds()),a.week=function(e){var t="星期";switch(e){case 0:t+="日";break;case 1:t+="一";break;case 2:t+="二";break;case 3:t+="三";break;case 4:t+="四";break;case 5:t+="五";break;case 6:t+="六"}return t}(t.getDay()),a}function P(e){return e.toString().length<2?"0"+e:e}function U(e){return"[object Object]"==Object.prototype.toString.call(e)}var x={gettime:A,one:function(e){if(!e)return"";var t=U(e)?e:A(e);return t.year+"-"+t.month+"-"+t.day},two:function(e){if(!e)return"";var t=U(e)?e:A(e);return t.year+"-"+t.month+"-"+t.day+" "+t.hour+"h"},three:function(e){if(!e)return"";var t=U(e)?e:A(e);return t.year+"-"+t.month+"-"+t.day+" "+t.hour+":"+t.minute},four:function(e){if(!e)return"";var t=U(e)?e:A(e);return t.year+"-"+t.month+"-"+t.day+" "+t.hour+":"+t.minute+":"+t.second},five:function(e){if(!e)return"";var t=U(e)?e:A(e);return t.month+"月"+t.day+"日"},six:function(e){if(!e)return"";var t=U(e)?e:A(e);return t.hour+":"+t.minute+":"+t.second},severn:function(e){return e?(U(e)?e:A(e)).week:""},changeTimeLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"number"!=typeof e&&(e=String(e)),Math.floor(e/3600)+"时"+Math.floor(e%3600/60)+"分"}},V=a("pFYg"),B=a.n(V);if(void 0===L)var L={};L.MQTT=function(e){var t={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},a=function(e,t){for(var a in e)if(e.hasOwnProperty(a)){if(!t.hasOwnProperty(a)){var s="Unknown property, "+a+". Valid properties are:";for(var a in t)t.hasOwnProperty(a)&&(s=s+" "+a);throw new Error(s)}if(B()(e[a])!==t[a])throw new Error(i(o.INVALID_TYPE,[B()(e[a]),a]))}},s=function(e,t){return function(){return e.apply(t,arguments)}},o={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."}},n={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},i=function(e,t){var a=e.text;if(t)for(var s,o,n=0;n<t.length;n++)if(s="{"+n+"}",(o=a.indexOf(s))>0){var i=a.substring(0,o),r=a.substring(o+s.length);a=i+t[n]+r}return a},r=[0,6,77,81,73,115,100,112,3],l=[0,4,77,81,84,84,4],c=function(e,t){for(var a in this.type=e,t)t.hasOwnProperty(a)&&(this[a]=t[a])};function d(e,a){var s,o=a,n=e[a],i=n>>4,r=n&=15;a+=1;var l=0,u=1;do{if(a==e.length)return[null,o];l+=(127&(s=e[a++]))*u,u*=128}while(0!=(128&s));var d=a+l;if(d>e.length)return[null,o];var p=new c(i);switch(i){case t.CONNACK:1&e[a++]&&(p.sessionPresent=!0),p.returnCode=e[a++];break;case t.PUBLISH:var h=r>>1&3,f=g(e,a),v=m(e,a+=2,f);a+=f,h>0&&(p.messageIdentifier=g(e,a),a+=2);var b=new L.MQTT.Message(e.subarray(a,d));1==(1&r)&&(b.retained=!0),8==(8&r)&&(b.duplicate=!0),b.qos=h,b.destinationName=v,p.payloadMessage=b;break;case t.PUBACK:case t.PUBREC:case t.PUBREL:case t.PUBCOMP:case t.UNSUBACK:p.messageIdentifier=g(e,a);break;case t.SUBACK:p.messageIdentifier=g(e,a),a+=2,p.returnCode=e.subarray(a,d)}return[p,d]}function p(e,t,a){return t[a++]=e>>8,t[a++]=e%256,a}function h(e,t,a,s){return v(e,a,s=p(t,a,s)),s+t}function g(e,t){return 256*e[t]+e[t+1]}function f(e){for(var t=0,a=0;a<e.length;a++){var s=e.charCodeAt(a);s>2047?(55296<=s&&s<=56319&&(a++,t++),t+=3):s>127?t+=2:t++}return t}function v(e,t,a){for(var s=a,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(55296<=r&&r<=56319){var l=e.charCodeAt(++n);if(isNaN(l))throw new Error(i(o.MALFORMED_UNICODE,[r,l]));r=l-56320+(r-55296<<10)+65536}r<=127?t[s++]=r:r<=2047?(t[s++]=r>>6&31|192,t[s++]=63&r|128):r<=65535?(t[s++]=r>>12&15|224,t[s++]=r>>6&63|128,t[s++]=63&r|128):(t[s++]=r>>18&7|240,t[s++]=r>>12&63|128,t[s++]=r>>6&63|128,t[s++]=63&r|128)}return t}function m(e,t,a){for(var s,n="",r=t;r<t+a;){var l=e[r++];if(l<128)s=l;else{var c=e[r++]-128;if(c<0)throw new Error(i(o.MALFORMED_UTF,[l.toString(16),c.toString(16),""]));if(l<224)s=64*(l-192)+c;else{var u=e[r++]-128;if(u<0)throw new Error(i(o.MALFORMED_UTF,[l.toString(16),c.toString(16),u.toString(16)]));if(l<240)s=4096*(l-224)+64*c+u;else{var d=e[r++]-128;if(d<0)throw new Error(i(o.MALFORMED_UTF,[l.toString(16),c.toString(16),u.toString(16),d.toString(16)]));if(!(l<248))throw new Error(i(o.MALFORMED_UTF,[l.toString(16),c.toString(16),u.toString(16),d.toString(16)]));s=262144*(l-240)+4096*c+64*u+d}}}s>65535&&(s-=65536,n+=String.fromCharCode(55296+(s>>10)),s=56320+(1023&s)),n+=String.fromCharCode(s)}return n}c.prototype.encode=function(){var e=(15&this.type)<<4,a=0,s=new Array,o=0;switch(void 0!=this.messageIdentifier&&(a+=2),this.type){case t.CONNECT:switch(this.mqttVersion){case 3:a+=r.length+3;break;case 4:a+=l.length+3}if(a+=f(this.clientId)+2,void 0!=this.willMessage){a+=f(this.willMessage.destinationName)+2;var n=this.willMessage.payloadBytes;n instanceof Uint8Array||(n=new Uint8Array(c)),a+=n.byteLength+2}void 0!=this.userName&&(a+=f(this.userName)+2),void 0!=this.password&&(a+=f(this.password)+2);break;case t.SUBSCRIBE:e|=2;for(var i=0;i<this.topics.length;i++)s[i]=f(this.topics[i]),a+=s[i]+2;a+=this.requestedQos.length;break;case t.UNSUBSCRIBE:e|=2;for(i=0;i<this.topics.length;i++)s[i]=f(this.topics[i]),a+=s[i]+2;break;case t.PUBREL:e|=2;break;case t.PUBLISH:this.payloadMessage.duplicate&&(e|=8),e=e|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(e|=1),a+=(o=f(this.payloadMessage.destinationName))+2;var c=this.payloadMessage.payloadBytes;a+=c.byteLength,c instanceof ArrayBuffer?c=new Uint8Array(c):c instanceof Uint8Array||(c=new Uint8Array(c.buffer));break;case t.DISCONNECT:}var u=function(e){var t=new Array(1),a=0;do{var s=e%128;(e>>=7)>0&&(s|=128),t[a++]=s}while(e>0&&a<4);return t}(a),d=u.length+1,g=new ArrayBuffer(a+d),v=new Uint8Array(g);if(v[0]=e,v.set(u,1),this.type==t.PUBLISH)d=h(this.payloadMessage.destinationName,o,v,d);else if(this.type==t.CONNECT){switch(this.mqttVersion){case 3:v.set(r,d),d+=r.length;break;case 4:v.set(l,d),d+=l.length}var m=0;this.cleanSession&&(m=2),void 0!=this.willMessage&&(m|=4,m|=this.willMessage.qos<<3,this.willMessage.retained&&(m|=32)),void 0!=this.userName&&(m|=128),void 0!=this.password&&(m|=64),v[d++]=m,d=p(this.keepAliveInterval,v,d)}switch(void 0!=this.messageIdentifier&&(d=p(this.messageIdentifier,v,d)),this.type){case t.CONNECT:d=h(this.clientId,f(this.clientId),v,d),void 0!=this.willMessage&&(d=h(this.willMessage.destinationName,f(this.willMessage.destinationName),v,d),d=p(n.byteLength,v,d),v.set(n,d),d+=n.byteLength),void 0!=this.userName&&(d=h(this.userName,f(this.userName),v,d)),void 0!=this.password&&(d=h(this.password,f(this.password),v,d));break;case t.PUBLISH:v.set(c,d);break;case t.SUBSCRIBE:for(i=0;i<this.topics.length;i++)d=h(this.topics[i],s[i],v,d),v[d++]=this.requestedQos[i];break;case t.UNSUBSCRIBE:for(i=0;i<this.topics.length;i++)d=h(this.topics[i],s[i],v,d)}return g};var _=function(e,a,s){this._client=e,this._window=a,this._keepAliveInterval=1e3*s,this.isReset=!1;var n=new c(t.PINGREQ).encode(),r=function(e){return function(){return l.apply(e)}},l=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=this._window.setTimeout(r(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(o.PING_TIMEOUT.code,i(o.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(r(this),this._keepAliveInterval))},this.cancel=function(){this._window.clearTimeout(this.timeout)}},C=function(e,t,a,s,o){this._window=t,a||(a=30);this.timeout=setTimeout(function(e,t,a){return function(){return e.apply(t,a)}}(s,e,o),1e3*a),this.cancel=function(){this._window.clearTimeout(this.timeout)}},w=function(t,a,s,n,r){if(!("WebSocket"in e&&null!==e.WebSocket))throw new Error(i(o.UNSUPPORTED,["WebSocket"]));if(!("localStorage"in e&&null!==e.localStorage))throw new Error(i(o.UNSUPPORTED,["localStorage"]));if(!("ArrayBuffer"in e&&null!==e.ArrayBuffer))throw new Error(i(o.UNSUPPORTED,["ArrayBuffer"]));for(var l in this._trace("Paho.MQTT.Client",t,a,s,n,r),this.host=a,this.port=s,this.path=n,this.uri=t,this.clientId=r,this._localKey=a+":"+s+("/mqtt"!=n?":"+n:"")+":"+r+":",this._msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,localStorage)0!=l.indexOf("Sent:"+this._localKey)&&0!=l.indexOf("Received:"+this._localKey)||this.restore(l)};w.prototype.host,w.prototype.port,w.prototype.path,w.prototype.uri,w.prototype.clientId,w.prototype.socket,w.prototype.connected=!1,w.prototype.maxMessageIdentifier=65536,w.prototype.connectOptions,w.prototype.hostIndex,w.prototype.onConnectionLost,w.prototype.onMessageDelivered,w.prototype.onMessageArrived,w.prototype.traceFunction,w.prototype._msg_queue=null,w.prototype._connectTimeout,w.prototype.sendPinger=null,w.prototype.receivePinger=null,w.prototype.receiveBuffer=null,w.prototype._traceBuffer=null,w.prototype._MAX_TRACE_ENTRIES=100,w.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(i(o.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(i(o.INVALID_STATE,["already connected"]));this.connectOptions=e,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},w.prototype.subscribe=function(e,a){if(this._trace("Client.subscribe",e,a),!this.connected)throw new Error(i(o.INVALID_STATE,["not connected"]));var s=new c(t.SUBSCRIBE);s.topics=[e],void 0!=a.qos?s.requestedQos=[a.qos]:s.requestedQos=[0],a.onSuccess&&(s.onSuccess=function(e){a.onSuccess({invocationContext:a.invocationContext,grantedQos:e})}),a.onFailure&&(s.onFailure=function(e){a.onFailure({invocationContext:a.invocationContext,errorCode:e})}),a.timeout&&(s.timeOut=new C(this,window,a.timeout,a.onFailure,[{invocationContext:a.invocationContext,errorCode:o.SUBSCRIBE_TIMEOUT.code,errorMessage:i(o.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(s),this._schedule_message(s)},w.prototype.unsubscribe=function(e,a){if(this._trace("Client.unsubscribe",e,a),!this.connected)throw new Error(i(o.INVALID_STATE,["not connected"]));var s=new c(t.UNSUBSCRIBE);s.topics=[e],a.onSuccess&&(s.callback=function(){a.onSuccess({invocationContext:a.invocationContext})}),a.timeout&&(s.timeOut=new C(this,window,a.timeout,a.onFailure,[{invocationContext:a.invocationContext,errorCode:o.UNSUBSCRIBE_TIMEOUT.code,errorMessage:i(o.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(s),this._schedule_message(s)},w.prototype.send=function(e){if(this._trace("Client.send",e),!this.connected)throw new Error(i(o.INVALID_STATE,["not connected"]));wireMessage=new c(t.PUBLISH),wireMessage.payloadMessage=e,e.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage)},w.prototype.disconnect=function(){if(this._trace("Client.disconnect"),!this.socket)throw new Error(i(o.INVALID_STATE,["not connecting or connected"]));var e=new c(t.DISCONNECT);this._notify_msg_sent[e]=s(this._disconnected,this),this._schedule_message(e)},w.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},w.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@")},w.prototype.stopTrace=function(){delete this._traceBuffer},w.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=s(this._on_socket_open,this),this.socket.onmessage=s(this._on_socket_message,this),this.socket.onerror=s(this._on_socket_error,this),this.socket.onclose=s(this._on_socket_close,this),this.sendPinger=new _(this,window,this.connectOptions.keepAliveInterval),this.receivePinger=new _(this,window,this.connectOptions.keepAliveInterval),this._connectTimeout=new C(this,window,this.connectOptions.timeout,this._disconnected,[o.CONNECT_TIMEOUT.code,i(o.CONNECT_TIMEOUT)])},w.prototype._schedule_message=function(e){this._msg_queue.push(e),this.connected&&this._process_queue()},w.prototype.store=function(e,a){var s={type:a.type,messageIdentifier:a.messageIdentifier,version:1};switch(a.type){case t.PUBLISH:a.pubRecReceived&&(s.pubRecReceived=!0),s.payloadMessage={};for(var n="",r=a.payloadMessage.payloadBytes,l=0;l<r.length;l++)r[l]<=15?n=n+"0"+r[l].toString(16):n+=r[l].toString(16);s.payloadMessage.payloadHex=n,s.payloadMessage.qos=a.payloadMessage.qos,s.payloadMessage.destinationName=a.payloadMessage.destinationName,a.payloadMessage.duplicate&&(s.payloadMessage.duplicate=!0),a.payloadMessage.retained&&(s.payloadMessage.retained=!0),0==e.indexOf("Sent:")&&(void 0===a.sequence&&(a.sequence=++this._sequence),s.sequence=a.sequence);break;default:throw Error(i(o.INVALID_STORED_DATA,[key,s]))}localStorage.setItem(e+this._localKey+a.messageIdentifier,u()(s))},w.prototype.restore=function(e){var a=localStorage.getItem(e),s=JSON.parse(a),n=new c(s.type,s);switch(s.type){case t.PUBLISH:for(var r=s.payloadMessage.payloadHex,l=new ArrayBuffer(r.length/2),u=new Uint8Array(l),d=0;r.length>=2;){var p=parseInt(r.substring(0,2),16);r=r.substring(2,r.length),u[d++]=p}var h=new L.MQTT.Message(u);h.qos=s.payloadMessage.qos,h.destinationName=s.payloadMessage.destinationName,s.payloadMessage.duplicate&&(h.duplicate=!0),s.payloadMessage.retained&&(h.retained=!0),n.payloadMessage=h;break;default:throw Error(i(o.INVALID_STORED_DATA,[e,a]))}0==e.indexOf("Sent:"+this._localKey)?(n.payloadMessage.duplicate=!0,this._sentMessages[n.messageIdentifier]=n):0==e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[n.messageIdentifier]=n)},w.prototype._process_queue=function(){for(var e=null,t=this._msg_queue.reverse();e=t.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},w.prototype._requires_ack=function(e){var a=b()(this._sentMessages).length;if(a>this.maxMessageIdentifier)throw Error("Too many messages:"+a);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===t.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},w.prototype._on_socket_open=function(){var e=new c(t.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},w.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),a=0;a<t.length;a+=1)this._handleMessage(t[a])},w.prototype._deframeMessages=function(e){var t=new Uint8Array(e);if(this.receiveBuffer){var a=new Uint8Array(this.receiveBuffer.length+t.length);a.set(this.receiveBuffer),a.set(t,this.receiveBuffer.length),t=a,delete this.receiveBuffer}try{for(var s=0,n=[];s<t.length;){var r=d(t,s),l=r[0];if(s=r[1],null===l)break;n.push(l)}s<t.length&&(this.receiveBuffer=t.subarray(s))}catch(e){return void this._disconnected(o.INTERNAL_ERROR.code,i(o.INTERNAL_ERROR,[e.message,e.stack.toString()]))}return n},w.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case t.CONNACK:if(this._connectTimeout.cancel(),this.connectOptions.cleanSession){for(var a in this._sentMessages){var s=this._sentMessages[a];localStorage.removeItem("Sent:"+this._localKey+s.messageIdentifier)}for(var a in this._sentMessages={},this._receivedMessages){var r=this._receivedMessages[a];localStorage.removeItem("Received:"+this._localKey+r.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(o.CONNACK_RETURNCODE.code,i(o.CONNACK_RETURNCODE,[e.returnCode,n[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var l=new Array;for(var u in this._sentMessages)this._sentMessages.hasOwnProperty(u)&&l.push(this._sentMessages[u]);for(var d=0,p=(l=l.sort(function(e,t){return e.sequence-t.sequence})).length;d<p;d++){if((s=l[d]).type==t.PUBLISH&&s.pubRecReceived){var h=new c(t.PUBREL,{messageIdentifier:s.messageIdentifier});this._schedule_message(h)}else this._schedule_message(s)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext}),this._process_queue();break;case t.PUBLISH:this._receivePublish(e);break;case t.PUBACK:(s=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(s.payloadMessage));break;case t.PUBREC:if(s=this._sentMessages[e.messageIdentifier]){s.pubRecReceived=!0;h=new c(t.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",s),this._schedule_message(h)}break;case t.PUBREL:r=this._receivedMessages[e.messageIdentifier];localStorage.removeItem("Received:"+this._localKey+e.messageIdentifier),r&&(this._receiveMessage(r),delete this._receivedMessages[e.messageIdentifier]);var g=new c(t.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(g);break;case t.PUBCOMP:s=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(s.payloadMessage);break;case t.SUBACK:(s=this._sentMessages[e.messageIdentifier])&&(s.timeOut&&s.timeOut.cancel(),128===e.returnCode[0]?s.onFailure&&s.onFailure(e.returnCode):s.onSuccess&&s.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case t.UNSUBACK:(s=this._sentMessages[e.messageIdentifier])&&(s.timeOut&&s.timeOut.cancel(),s.callback&&s.callback(),delete this._sentMessages[e.messageIdentifier]);break;case t.PINGRESP:this.sendPinger.reset();break;case t.DISCONNECT:this._disconnected(o.INVALID_MQTT_MESSAGE_TYPE.code,i(o.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(o.INVALID_MQTT_MESSAGE_TYPE.code,i(o.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){return void this._disconnected(o.INTERNAL_ERROR.code,i(o.INTERNAL_ERROR,[e.message,e.stack.toString()]))}},w.prototype._on_socket_error=function(e){this._disconnected(o.SOCKET_ERROR.code,i(o.SOCKET_ERROR,[e.data]))},w.prototype._on_socket_close=function(){this._disconnected(o.SOCKET_CLOSE.code,i(o.SOCKET_CLOSE))},w.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},w.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var a=new c(t.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(a),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var s=new c(t.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(s);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}},w.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},w.prototype._disconnected=function(e,t){this._trace("Client._disconnected",e,t),this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&this._connectTimeout.cancel(),this._msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1?(this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex])):(void 0===e&&(e=o.OK.code,t=i(o.OK)),this.connected?(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t})):4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping users to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t}))},w.prototype._trace=function(){if(this.traceFunction){for(var e in arguments)void 0!==arguments[e]&&(arguments[e]=u()(arguments[e]));var t=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:t})}if(null!==this._traceBuffer){e=0;for(var a=arguments.length;e<a;e++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===e?this._traceBuffer.push(arguments[e]):void 0===arguments[e]?this._traceBuffer.push(arguments[e]):this._traceBuffer.push("  "+u()(arguments[e]))}},w.prototype._traceMask=function(e,t){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=s==t?"******":e[s]);return a};var y=function(e,t,s,n){var r;if("string"!=typeof e)throw new Error(i(o.INVALID_TYPE,[void 0===e?"undefined":B()(e),"host"]));if(2==arguments.length){n=t;var l=(r=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!l)throw new Error(i(o.INVALID_ARGUMENT,[e,"host"]));e=l[4]||l[2],t=parseInt(l[7]),s=l[8]}else{if(3==arguments.length&&(n=s,s="/mqtt"),"number"!=typeof t||t<0)throw new Error(i(o.INVALID_TYPE,[void 0===t?"undefined":B()(t),"port"]));if("string"!=typeof s)throw new Error(i(o.INVALID_TYPE,[void 0===s?"undefined":B()(s),"path"]));var c=-1!=e.indexOf(":")&&"["!=e.slice(0,1)&&"]"!=e.slice(-1);r="ws://"+(c?"["+e+"]":e)+":"+t+s}for(var u=0,d=0;d<n.length;d++){var p=n.charCodeAt(d);55296<=p&&p<=56319&&d++,u++}if("string"!=typeof n||u>65535)throw new Error(i(o.INVALID_ARGUMENT,[n,"clientId"]));var h=new w(r,e,t,s,n);this._getHost=function(){return e},this._setHost=function(){throw new Error(i(o.UNSUPPORTED_OPERATION))},this._getPort=function(){return t},this._setPort=function(){throw new Error(i(o.UNSUPPORTED_OPERATION))},this._getPath=function(){return s},this._setPath=function(){throw new Error(i(o.UNSUPPORTED_OPERATION))},this._getURI=function(){return r},this._setURI=function(){throw new Error(i(o.UNSUPPORTED_OPERATION))},this._getClientId=function(){return h.clientId},this._setClientId=function(){throw new Error(i(o.UNSUPPORTED_OPERATION))},this._getOnConnectionLost=function(){return h.onConnectionLost},this._setOnConnectionLost=function(e){if("function"!=typeof e)throw new Error(i(o.INVALID_TYPE,[void 0===e?"undefined":B()(e),"onConnectionLost"]));h.onConnectionLost=e},this._getOnMessageDelivered=function(){return h.onMessageDelivered},this._setOnMessageDelivered=function(e){if("function"!=typeof e)throw new Error(i(o.INVALID_TYPE,[void 0===e?"undefined":B()(e),"onMessageDelivered"]));h.onMessageDelivered=e},this._getOnMessageArrived=function(){return h.onMessageArrived},this._setOnMessageArrived=function(e){if("function"!=typeof e)throw new Error(i(o.INVALID_TYPE,[void 0===e?"undefined":B()(e),"onMessageArrived"]));h.onMessageArrived=e},this._getTrace=function(){return h.traceFunction},this._setTrace=function(e){if("function"!=typeof e)throw new Error(i(o.INVALID_TYPE,[void 0===e?"undefined":B()(e),"onTrace"]));h.traceFunction=e},this.connect=function(e){if(a(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(i(o.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(i(o.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof S))throw new Error(i(o.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload,void 0===e.willMessage.destinationName)throw new Error(i(o.INVALID_TYPE,[B()(e.willMessage.destinationName),"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(i(o.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(i(o.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,n=0;n<e.hosts.length;n++){if("string"!=typeof e.hosts[n])throw new Error(i(o.INVALID_TYPE,[B()(e.hosts[n]),"connectOptions.hosts["+n+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[n])){if(0==n)t=!0;else if(!t)throw new Error(i(o.INVALID_ARGUMENT,[e.hosts[n],"connectOptions.hosts["+n+"]"]))}else if(t)throw new Error(i(o.INVALID_ARGUMENT,[e.hosts[n],"connectOptions.hosts["+n+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(i(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(i(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!=e.ports.length)throw new Error(i(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));e.uris=[];for(n=0;n<e.hosts.length;n++){if("number"!=typeof e.ports[n]||e.ports[n]<0)throw new Error(i(o.INVALID_TYPE,[B()(e.ports[n]),"connectOptions.ports["+n+"]"]));var l=e.hosts[n],c=e.ports[n],u=-1!=l.indexOf(":");r="ws://"+(u?"["+l+"]":l)+":"+c+s,e.uris.push(r)}}}h.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(a(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(i(o.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));h.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(a(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");h.unsubscribe(e,t)},this.send=function(e,t,a,s){var n;if(0==arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof S)&&"string"!=typeof e)throw new Error("Invalid argument:"+(void 0===e?"undefined":B()(e)));if(void 0===(n=e).destinationName)throw new Error(i(o.INVALID_ARGUMENT,[n.destinationName,"Message.destinationName"]));h.send(n)}else(n=new S(t)).destinationName=e,arguments.length>=3&&(n.qos=a),arguments.length>=4&&(n.retained=s),h.send(n)},this.disconnect=function(){h.disconnect()},this.getTraceLog=function(){return h.getTraceLog()},this.startTrace=function(){h.startTrace()},this.stopTrace=function(){h.stopTrace()},this.isConnected=function(){return h.connected}};y.prototype={get host(){return this._getHost()},set host(e){this._setHost(e)},get port(){return this._getPort()},set port(e){this._setPort(e)},get path(){return this._getPath()},set path(e){this._setPath(e)},get clientId(){return this._getClientId()},set clientId(e){this._setClientId(e)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(e){this._setOnConnectionLost(e)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(e){this._setOnMessageDelivered(e)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(e){this._setOnMessageArrived(e)},get trace(){return this._getTrace()},set trace(e){this._setTrace(e)}};var S=function(e){var t;if(!("string"==typeof e||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array))throw i(o.INVALID_ARGUMENT,[e,"newPayload"]);t=e,this._getPayloadString=function(){return"string"==typeof t?t:m(t,0,t.length)},this._getPayloadBytes=function(){if("string"==typeof t){var e=new ArrayBuffer(f(t)),a=new Uint8Array(e);return v(t,a,0),a}return t};var a=void 0;this._getDestinationName=function(){return a},this._setDestinationName=function(e){if("string"!=typeof e)throw new Error(i(o.INVALID_ARGUMENT,[e,"newDestinationName"]));a=e};var s=0;this._getQos=function(){return s},this._setQos=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);s=e};var n=!1;this._getRetained=function(){return n},this._setRetained=function(e){if("boolean"!=typeof e)throw new Error(i(o.INVALID_ARGUMENT,[e,"newRetained"]));n=e};var r=!1;this._getDuplicate=function(){return r},this._setDuplicate=function(e){r=e}};return S.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(e){this._setDestinationName(e)},get qos(){return this._getQos()},set qos(e){this._setQos(e)},get retained(){return this._getRetained()},set retained(e){this._setRetained(e)},get duplicate(){return this._getDuplicate()},set duplicate(e){this._setDuplicate(e)}},{Client:y,Message:S}}(window);var q,z,Q,F,H,G,j,J,Y=L,K=a("7t+N"),Z=a.n(K),W=(q=null,z={userName:"gmesdev",password:"gmesdev",keepAliveInterval:10},Q={qos:1},F={},H=null,G={},j={},J=0,{connect:function(e){var t=this;console.log(e);var a,s=this;return new v.a((a=p()(l.a.mark(function a(o,n){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:0!=J&&H&&H.isConnected?o():(q="GMES-1001-"+(new Date).getTime(),(H=new Y.MQTT.Client("10.86.130.25",15675,"/ws",q)).onConnectionLost=function(t){console.log("Websocket disconnect : "+t.errorMessage),console.log("连接丢失，重新连接"),H=null,s.connect(e)},H.onMessageArrived=function(e){var t=void 0;Z.a.each(G,function(a,s){(t=e.destinationName.match(a))&&t.length>0&&Z.a.each(s,function(t,a){try{a(e)}catch(e){console.error(e)}})})},(e=N()({},z,e)).onSuccess=function(){console.log(q+": CONNECTED"),o(),J=2},e.onFailure=function(e){console.log(q+": CONNECTION FAILURE - "+e.errorMessage),n(),J=0},H.connect(e));case 1:case"end":return t.stop()}},a,t)})),function(e,t){return a.apply(this,arguments)}))},existSubscribe:function(e,t){if(!j[t=t||"default"])return!1;for(var a=0;a<j[t].length;a++)if(j[t][a]===e)return!0},subscribe:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a=N()({},Q,a),t=t||"default",this.existSubscribe(e,t)||this.connect().then(function(){H.subscribe(e,a),j[t]||(j[t]=[]),j[t].push(e)})},unsubscribe:function(e,t,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(s=N()({},F,s),a=a||!0,t=t||"default",this.existSubscribe(e,t)){if(H.unsubscribe(e),j[t]){var o=[];Z.a.each(j[t],function(t,a){a!==e&&o.push(a)}),j[t]=o}!0===a&&delete G[e]}},unsubscribeUnlessSpecifiedGroup:function(e,t,a){e=e||"default",Z.a.each(j,function(a,s){"default"!==a&&e!==a&&(Z.a.each(s,function(e,a){H.unsubscribe(a),!0===t&&delete G[a]}),delete j[e])})},unsubscribeAll:function(){Z.a.each(j,function(e,t){Z.a.each(t,function(e,t){H.unsubscribe(t)})}),j={},G={}},registerMessageHandler:function(e,t,a){e=e.replace(/\+/g,"[^/@REX@]*").replace(/\#/g,"[^@REX@]*").replace(/@REX@/g,"+#"),t=-1==t.indexOf(".")?"default."+t:t,G[e]||(G[e]={}),G[e][t]=a},removeMessageHandlersUnlessSpecifiedGroup:function(e){e=e||"default",Z.a.each(j,function(t,a){Z.a.each(a,function(e,t){Z.a.each(G[t],function(e,a){"default"!==e.substr(0,e.indexOf("."))&&delete G[t][e]})}),delete j[e]})},removeMessageHandler:function(e,t){e=e.replace(/\+/g,"[^/@REX@]*").replace(/\#/g,"[^@REX@]*").replace(/@REX@/g,"+#"),t.indexOf("."),G[e]&&delete G[e][t]},disconnect:function(){this.unsubscribeAll(),H.disconnect()},sendMessage:function(e){var t=new Y.MQTT.Message(e);t.destinationName="/message",console.log("SEND ON "+t.destinationName+" PAYLOAD "+e),H.send(t)}}),X={data:function(){return{fullscreen:!0,messages:"",num:0,messageDialogVisible:!1,sysdate:"",week:"",systime:"",isMenuShow:!1,wifiStatus:"0",tabPosition:"top",activeNames:["1"],chooseTypeVal:2,messageData:[{title:"11",message:"1111111",status:0},{title:"11",message:"1111111",status:0},{title:"11",message:"1111111",status:0},{title:"11",message:"1111111",status:0}],isHasRead:!1,animate:!1,listData:[{title:"无缝滚动第一行无1111111111111111111111111111111111111111缝滚动第一行",date:"2017-12-16"}]}},computed:{time:{set:function(e){this.$store.state.timer1=e},get:function(){return this.$store.state.timer1}},classOption:function(){return{step:1,limitMoveNum:0,hoverStop:!0,direction:2}}},created:function(){var e=this;document.querySelector("body").addEventListener("click",function(t){"ment-list"!==t.target.id&&(e.isMenuShow=!1)},!1),this.getServertime(),this.time&&clearInterval(this.time),this.gettest()},methods:{requestFullScreen:function(){var e=document.documentElement;1==this.fullscreen?(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.fullscreen=!this.fullscreen):(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.fullscreen=!this.fullscreen)},menuClick:function(){this.isMenuShow=!this.isMenuShow},getMessage:function(){this.messageDialogVisible=!0},gettest:function(){var e=this;this.$store.state.timer1=window.setInterval(function(){e.getServertime()},2e4)},getServertime:function(){var e=this;S(R.getServertime).then(function(t){var a=new Date(t.data.data).getTime(),s=x.gettime(a);e.sysdate=x.five(s),e.week=s.week,window.setInterval(function(){a+=1e3,e.systime=x.six(a)},1e3)})},subscribe:function(){var e=this;console.log("begin----------"),W.subscribe("/logs","message"),W.registerMessageHandler("/logs","message",function(t){e.messages=t.payloadString,console.log(e.messages)})},unsubscribe:function(){console.log("close----------"),W.unsubscribe("/message","message")},handleChange:function(e){var t=e[e.length-1];this.messageData[t].status=1},haveRead:function(){this.isHasRead=!0},switchPane:function(e){this.chooseTypeVal="全部"===e?2:"已读"===e?1:0},messlist2:function(e){return this.messageData.filter(function(e){return 2==e.status})},messlist1:function(e){return this.messageData.filter(function(e){return 1==e.status})},messlist0:function(e){return this.messageData.filter(function(e){return 0==e.status})}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app-foot"}},[a("div",{staticClass:"btn-list"},[a("div",{staticClass:"foot-btn f-cp icon-pad-menu",staticStyle:{color:"#fff"},attrs:{id:"ment-list"},on:{click:function(t){e.menuClick()}}}),e._v(" "),a("div",{staticClass:"foot-btn f-cp icon-pad-message",on:{click:function(t){e.getMessage()}}}),e._v(" "),a("div",{staticClass:"foot-btn f-cp icon-pad-fullscreen",on:{click:function(t){e.requestFullScreen()}}}),e._v(" "),a("el-dialog",{attrs:{visible:e.messageDialogVisible,width:"80%",center:""},on:{"update:visible":function(t){e.messageDialogVisible=t}}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"消息订阅"}},[2==this.chooseTypeVal?a("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.messageData,function(t,s){return a("el-collapse-item",{key:s,attrs:{title:t.title,name:s}},[a("template",{slot:"title"},[e._v("\n                一致性 Consistency "),a("i",{staticClass:"message-icon-read"})]),e._v(" "),a("div",[e._v(e._s(t.message))])],2)})):e._e()],1)],1)],1)],1),e._v(" "),a("vue-seamless-scroll",{staticClass:"seamless-warp",attrs:{data:e.listData,"class-option":e.classOption}},[a("ul",{staticClass:"item"},e._l(e.listData,function(t){return a("li",[a("span",{staticClass:"title",domProps:{textContent:e._s(t.title)}})])}))]),e._v(" "),a("div",{staticClass:"system-info",attrs:{"sw-role":"cell"}},[a("div",{staticClass:"time",attrs:{"sw-role":"cell","sw-mode":"y","sw-valign":"center"}},[a("div",[e._v(e._s(e.systime))]),e._v(" "),a("div",[e._v(e._s(e.sysdate)+"/"+e._s(e.week))])]),e._v(" "),a("div",{staticClass:"signal",class:"0"==e.wifiStatus?"success":"fail"})]),e._v(" "),a("navlist",{attrs:{isMenuShow:e.isMenuShow}})],1)},staticRenderFns:[]};var ee={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content-body"},[t("router-view")],1)},staticRenderFns:[]};var te={data:function(){return{titless:""}},created:function(){this.get()},methods:{get:function(){this.titless=localStorage.getItem("title")}}},ae={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app-head"}},[t("img",{attrs:{src:a("7Otq")}}),this._v(" "),t("img",{attrs:{src:a("bWjS")}})])}]};var se={data:function(){return{isShowNavMenu:!1}},created:function(){},components:{appFoot:a("VU/8")(X,$,!1,function(e){a("Z5UN")},null,null).exports,appBody:a("VU/8")({data:function(){return{}}},ee,!1,function(e){a("nfXI")},"data-v-4e136afd",null).exports,appHead:a("VU/8")(te,ae,!1,function(e){a("3qkD")},null,null).exports},methods:{closeMenu:function(){this.isShowNavMenu=!1},NavMenuEmit:function(e){this.isShowNavMenu=!this.isShowNavMenu},changeNavMenu:function(){console.log(q11)}}},oe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hello-pad",on:{click:this.closeMenu}},[t("app-head"),this._v(" "),t("app-body",{staticClass:"content"}),this._v(" "),t("app-foot",{on:{changeNavMenu:function(e){}}})],1)},staticRenderFns:[]};var ne=a("VU/8")(se,oe,!1,function(e){a("3FjS")},"data-v-57d06bea",null).exports,ie={jsonToFormData:function(e){var t="",a=b()(e);return a.forEach(function(s,o){o===a.length-1?t+=s+"="+e[s]:t+=s+"="+e[s]+"&"}),t},sessionClean:function(){sessionStorage.removeItem("userCode"),sessionStorage.removeItem("password"),window.localStorage.removeItem("list"),window.localStorage.removeItem("terminal"),window.localStorage.removeItem("serialPort"),window.localStorage.removeItem("sessionId"),window.localStorage.removeItem("title")}},re=ie,le={data:function(){return{form:{port:"",baudRate:"",dataBit:"",checkBit:"",stopBit:"",enable:"",terminalCode:JSON.parse(window.localStorage.getItem("terminal")).terminalCode},rule:{port:[{required:!0,message:"请选择端口号",trigger:"change"}],baudRate:[{required:!0,message:"请选择波特率",trigger:"change"}],dataBit:[{required:!0,message:"请输入数据位",trigger:"blur"}],stopBit:[{required:!0,message:"请选择停止位",trigger:"change"}],enable:[{required:!0,message:"请选择是否生效",trigger:"change"}]}}},methods:{onSubmit:function(e){var t,a=this;this.$refs[e].validate((t=p()(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&S(R.saveSystemCom,a.form).then(function(e){if("0"==e.data.returnCode){a.$message({message:"保存成功",type:"success"}),window.localStorage.setItem("serialPort",u()(a.form));var t=JSON.parse(window.localStorage.getItem("terminal"));null==t.homePage||void 0==t.homePage||""==t.homePage?(a.$message({message:"请联系管理员配置首页！",type:"warning"}),a.$router.push("/home")):a.$router.push(t.homePage)}}).catch(function(e){console.log(e.response),a.$message({message:e.response.data.errorMessage,type:"error"})});case 1:case"end":return e.stop()}},e,a)})),function(e){return t.apply(this,arguments)}))}}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"systemConfiguration"},[a("el-container",[a("el-header",[e._v("\n      串口设置\n    ")]),e._v(" "),a("el-main",[a("el-form",{ref:"form",attrs:{model:e.form}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"端口",prop:"port",rules:e.rule.port}},[a("el-select",{attrs:{prop:"port",placeholder:"请选择端口"},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",t)},expression:"form.port"}},[a("el-option",{attrs:{label:"COM1",value:"COM1"}}),e._v(" "),a("el-option",{attrs:{label:"COM2",value:"COM2"}}),e._v(" "),a("el-option",{attrs:{label:"COM3",value:"COM3"}}),e._v(" "),a("el-option",{attrs:{label:"COM4",value:"COM4"}}),e._v(" "),a("el-option",{attrs:{label:"COM5",value:"COM5"}}),e._v(" "),a("el-option",{attrs:{label:"COM6",value:"COM6"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"波特率",prop:"baudRate",rules:e.rule.baudRate}},[a("el-select",{attrs:{placeholder:"请选择波特率"},model:{value:e.form.baudRate,callback:function(t){e.$set(e.form,"baudRate",t)},expression:"form.baudRate"}},[a("el-option",{attrs:{label:"300",value:"300"}}),e._v(" "),a("el-option",{attrs:{label:"600",value:"600"}}),e._v(" "),a("el-option",{attrs:{label:"1200",value:"1200"}}),e._v(" "),a("el-option",{attrs:{label:"2400",value:"2400"}}),e._v(" "),a("el-option",{attrs:{label:"4800",value:"4800"}}),e._v(" "),a("el-option",{attrs:{label:"9600",value:"9600"}}),e._v(" "),a("el-option",{attrs:{label:"19200",value:"19200"}}),e._v(" "),a("el-option",{attrs:{label:"38400",value:"38400"}}),e._v(" "),a("el-option",{attrs:{label:"43000",value:"43000"}}),e._v(" "),a("el-option",{attrs:{label:"56000",value:"56000"}}),e._v(" "),a("el-option",{attrs:{label:"57600",value:"57600"}}),e._v(" "),a("el-option",{attrs:{label:"115200",value:"115200"}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据位",prop:"dataBit",rules:e.rule.dataBit}},[a("el-input",{attrs:{placeholder:"请输入数据位"},model:{value:e.form.dataBit,callback:function(t){e.$set(e.form,"dataBit",t)},expression:"form.dataBit"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"校验位",prop:"checkBit",rules:e.rule.checkBit}},[a("el-select",{attrs:{placeholder:"请选择校验位"},model:{value:e.form.checkBit,callback:function(t){e.$set(e.form,"checkBit",t)},expression:"form.checkBit"}},[a("el-option",{attrs:{label:"None",value:""}}),e._v(" "),a("el-option",{attrs:{label:"1",value:"1"}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"停止位",prop:"stopBit",rules:e.rule.stopBit}},[a("el-select",{attrs:{placeholder:"请选择停止位"},model:{value:e.form.stopBit,callback:function(t){e.$set(e.form,"stopBit",t)},expression:"form.stopBit"}},[a("el-option",{attrs:{label:"1",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"2",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否生效",prop:"enable",rules:e.rule.enable}},[a("el-select",{attrs:{placeholder:"是否生效"},model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}},[a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("保存")]),e._v(" "),a("el-button",[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var ue=a("VU/8")(le,ce,!1,function(e){a("hAXs")},null,null).exports,de={data:function(){return{StepDatas:[{title:"托盘已到位,正在请求订单数据！",icon:"el-icon-edit"},{title:"正在下发TAG数据！",icon:"el-icon-download"},{title:"初始化成功！",icon:"el-icon-success"}],proinfo:{},number:0,tableData:[],dialogTableVisible:!1,dialogFormVisible:!1,gridData:[],total:0}},computed:{},created:function(){this.getData(),this.subscribe()},beforeDestroy:function(){this.unsubscribe()},methods:{getData:function(){var e=this,t={workCenterCode:JSON.parse(window.localStorage.getItem("terminal")).workCenterCode,statuseCode:"7",endRow:3};S(R.getinitializeTable,t).then(function(t){e.tableData=t.data.data})},getHistoryInfo:function(){var e=this;this.dialogTableVisible=!0;var t={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,pageNo:"1",pageSize:"1"};S(R.getHistoryInfo,t).then(function(t){if("0"==t.data.returnCode){var a=t.data.data;e.gridData=a.productionStnRecords,e.total=a.toalCount}})},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){var t=this;console.log(e),this.dialogTableVisible=!0;var a={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,pageNo:e,pageSize:"1"};S(R.getHistoryInfo,a).then(function(e){console.log(333);var a=e.data.data;t.gridData=a.productionStnRecords,t.total=a.toalCount})},subscribe:function(){var e=this;W.subscribe("/logs/STN3010","message"),W.registerMessageHandler("/logs/STN3010","message",function(t){var a=JSON.parse(t.payloadString);console.log(a);var s=a.Content;if("LOAD"==a.Type){var o=s.Step,n=s.Log;switch(console.log(o),o){case"Ready":e.number=1,e.StepDatas[e.number-1].title=n,console.log(e.StepDatas[e.number-1].description),e.StepDatas[e.number-1].description="";break;case"Download":e.number=2,e.StepDatas[e.number-1].title=n,console.log(e.StepDatas[e.number-1].description),e.StepDatas[e.number-1].description="";break;case"Complete":e.number=3,e.StepDatas[e.number-1].title=n,console.log(e.StepDatas[e.number-1].description),e.StepDatas[e.number-1].description="",e.$options.methods.getData(),console.log("111111111111");break;default:e.StepDatas[e.number-1].title=n,e.StepDatas[e.number-1].description="ERROR!!!",e.StepDatas[e.number-1].icon="el-icon-error"}}else{var i={productionOrderNum:s.Data};S(R.getCurrentProductionOrder,i).then(function(t){e.proinfo=t.data.data})}})},unsubscribe:function(){W.unsubscribe("/logs","message")}}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"initialize"},[a("div",{staticClass:"topbox"},[a("el-container",[a("el-aside",{attrs:{width:"60%"}},[a("div",{staticClass:"right-container"},[a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("工单编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.productionOrderNum))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("机型")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.productModel))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("物料编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.materialCode))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("订单编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.productOrderNum))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("计划数量")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.plannedQuantity))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("顺序号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.orderNo))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("label",{staticClass:"label"},[e._v("发动机号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.serialNo))])])],1)],1)])]),e._v(" "),a("el-main",[a("div",{staticClass:"progress"},[a("div",{staticClass:"container"},[a("el-steps",{ref:"steps",attrs:{direction:"vertical",active:e.number}},e._l(e.StepDatas,function(e,t){return a("el-step",{key:t,attrs:{icon:e.icon,title:e.title,description:e.description}})}))],1)])])],1)],1),e._v(" "),a("div",{staticClass:"bottom-form"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"productOrderNum",label:"订单编号",width:"230"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productionOrderNum",label:"工单编号",width:"230"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"顺序号",width:"260"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plannedQty",label:"计划数量",width:"162"}})],1)],1),e._v(" "),a("div",{staticClass:"icon-pad-history",on:{click:function(t){e.getHistoryInfo()}}}),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"80%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.gridData}},[a("el-table-column",{attrs:{prop:"productOrderNum",label:"订单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productionOrderNum",label:"工单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productModel",label:"机型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialText",label:"物料描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quanlity",label:"计划数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"顺序号"}})],1),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[1],"page-size":1,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var he=a("VU/8")(de,pe,!1,function(e){a("8TJq")},null,null).exports,ge={data:function(){return{tableData:[],dialogTableVisible:!1,gridData:[],pageNo:"",total:0}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={workCenterCode:JSON.parse(window.localStorage.getItem("terminal")).workCenterCode,statuseCode:"10",endRow:3};S(R.getAssemblyData,t).then(function(t){e.tableData=t.data.data})},getHistoryInfo:function(){var e=this;this.dialogTableVisible=!0;var t={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,pageNo:"1",pageSize:"1"};S(R.getHistoryInfo,t).then(function(t){var a=t.data.data;e.gridData=a.productionStnRecords,e.total=a.toalCount})},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){var t=this;console.log(e),this.dialogTableVisible=!0;var a={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,pageNo:e,pageSize:"1"};S(R.getHistoryInfo,a).then(function(e){var a=e.data.data;t.gridData=a.productionStnRecords,t.total=a.toalCount})}}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"assemblyOnline"},[a("el-container",[a("el-aside",{attrs:{width:"60%"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("工单编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.tableData.productionOrderNum))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("机型")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.tableData.productModel))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("物料编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.tableData.materialCode))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("订单编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.tableData.productOrderNum))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("计划数量")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.tableData.plannedQuantity))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("顺序号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.tableData.orderNo))])])],1)],1),e._v(" "),a("el-main",[a("div",{staticClass:"img-container no-info engine"})])],1),e._v(" "),a("div",{staticClass:"bottom"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"productOrderNum",label:"订单编号",width:"240"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productionOrderNum",label:"工单编号",width:"230"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"顺序号",width:"260"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plannedQty",label:"计划数量",width:"152"}})],1)],1),e._v(" "),a("div",{staticClass:"icon-pad-history",on:{click:function(t){e.getHistoryInfo()}}}),e._v(" "),a("div",{staticClass:"history-info"},[a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"80%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.gridData}},[a("el-table-column",{attrs:{prop:"productOrderNum",label:"订单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productionOrderNum",label:"工单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productModel",label:"机型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialText",label:"物料描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quanlity",label:"计划数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"顺序号"}})],1),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[1],"page-size":1,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var ve=a("VU/8")(ge,fe,!1,function(e){a("DyUH")},null,null).exports,me=a("bOdI"),be=a.n(me),_e={data:function(){return{centerDialogVisible:!1,productionOrderNum:"",tableData:[],gridData:[],proinfo:{},plannedQty:0,code:"",productCount:0,dialogTableVisible:!1,currentRow:null,serialPort:"",total:0}},beforeRouteLeave:function(e,t,a){this.closeCom(),a()},created:function(){this.getMachiningProductionQueue()},mounted:function(){this.openCom()},methods:be()({openCom:function(){try{var e=this,t=new SerialPort(JSON.parse(window.localStorage.getItem("serialPort")).port,{autoOpen:!1}),a=new(0,SerialPort.parsers.Readline);t.pipe(a),t.open(function(e){if(e)return console.log("Error opening port:",e.message);this.$message({message:"串口打开成功",type:"success"})}),a.on("data",function(t){e.code=t}),e.serialPort=t}catch(e){}finally{this.$message({message:"串口打开失败",type:"error"})}},closeCom:function(){try{if(this.serialPort.isOpen){this.serialPort.close(function(e){e?console.log(e):this.$message({message:"窗口关闭成功",type:"success"})})}}catch(e){}finally{this.$message({message:"串口关闭失败",type:"error"})}},setCurrent:function(e){this.$refs.table.setCurrentRow(e)},validplannedQty:function(){this.productCount<this.plannedQty?this.validMachiningProductRecord():this.centerDialogVisible=!0},continueON:function(){this.centerDialogVisible=!1,this.validMachiningProductRecord()},onFinish:function(){var e=this;this.centerDialogVisible=!1;var t={productionOrderNum:this.productionOrderNum};this.$confirm("确认完成该工单？").then(function(a){S(R.updateMachiningProduction,t).then(function(t){"0"==t.data.returnCode&&e.getMachiningProductionQueue()})}).catch(function(e){})},validMachiningProductRecord:function(){var e=this,t={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,scanCode:this.code,productionOrderNum:this.productionOrderNum};S(R.validMachiningProductRecord,t).then(function(t){console.log(t),"0"==t.data.returnCode&&(e.productCount++,e.getMachiningProductionQueue())})},getHistoryInfo:function(){var e=this;this.dialogTableVisible=!0;var t={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,pageNo:"1",pageSize:"1"};S(R.getHistoryInfo,t).then(function(t){var a=t.data.data;e.gridData=a.productionStnRecords})},getMachiningProductionQueue:function(){var e=this,t={workCenterCode:JSON.parse(window.localStorage.getItem("terminal")).workCenterCode,endRow:4};S(R.getMachiningProductionQueue,t).then(function(t){e.tableData=t.data.data})},handleCurrentChange:function(e,t){var a=this;null!=e?(this.currentRow=e,this.proinfo=e,this.productCount=this.currentRow.scanQty,this.plannedQty=this.currentRow.plannedQty,this.productionOrderNum=this.currentRow.productionOrderNum):this.tableData.forEach(function(e,s,o){o[s].productionOrderNum==t.productionOrderNum&&a.setCurrent(a.tableData[s])})},handleSizeChange:function(e){console.log("每页 "+e+" 条")}},"handleCurrentChange",function(e){})},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"machineplusOnline"},[a("div",{staticClass:"convent"},[a("div",{staticClass:"convent-input"},[a("span",{staticStyle:{width:"8rem","font-size":"1.4rem",color:"#000000","font-weight":"bold"}},[e._v("零件条码")]),e._v(" "),a("el-input",{attrs:{autosize:{minRows:4,maxRows:4},size:"80"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.show(t)}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.validplannedQty()}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{type:"success"}},[e._v("已扫数量："+e._s(e.productCount))])],1),e._v(" "),a("div",{staticClass:"topbox"},[a("div",{staticClass:"right-container",attrs:{id:"currentorder"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("工单编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.productionOrderNum))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("物料编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.materialCode))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("物料描述")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.materialText))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("产品机型")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.productModel))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("顺序号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.orderNo))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("计划数量")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.plannedQty))])])],1)],1)]),e._v(" "),a("div",{staticClass:"bottom-form"},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"orderNo",label:"顺序号",width:"240"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productionOrderNum",label:"工单编号",width:"230"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plannedQty",label:"计划数量",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"scanQty",label:"已扫数量",width:"190"}})],1)],1),e._v(" "),a("div",{staticClass:"history-info"},[a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"80%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.gridData}},[a("el-table-column",{attrs:{prop:"productOrderNum",label:"订单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productionOrderNum",label:"工单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productModel",label:"机型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialText",label:"物料描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quanlity",label:"计划数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"顺序号"}})],1),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[1],"page-size":1,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"注意",visible:e.centerDialogVisible,width:"50%",top:"30vh","show-close":!1,center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("span",[e._v("已扫数量超出计划数量")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.continueON()}}},[e._v("继续")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onFinish()}}},[e._v("完成")])],1)]),e._v(" "),a("div",{staticClass:"icon-pad-history",on:{click:function(t){e.getHistoryInfo()}}})],1)},staticRenderFns:[]};var we=a("VU/8")(_e,Ce,!1,function(e){a("IS4w")},null,null).exports,ye={data:function(){return{StepDatas:[{title:"托盘已到位,准备读取数据",icon:"el-icon-edit"},{title:"正在读取数据",icon:"el-icon-upload"},{title:"读取数据成功",icon:"el-icon-success"}],title:"111",serialPort:"",name:"pro-gress",code:"",number:0,dialogTableVisible:!1,tableData:[],total:0,gridData:[],productCount:0}},beforeRouteLeave:function(e,t,a){this.closeCom(),a()},created:function(){this.subscribe(),console.log("开始订阅消息")},mounted:function(){this.openCom()},beforeDestroy:function(){this.unsubscribe(),console.log("取消订阅")},methods:{subscribe:function(){var e=this;W.subscribe("/logs/STN3010","message"),W.registerMessageHandler("/logs/STN3010","message",function(t){console.log(t.payloadString);var a=JSON.parse(t.payloadString).Content.Step,s=JSON.parse(t.payloadString).Content.Log;switch(a){case"Read":e.number=1,e.StepDatas[e.number-1].title=s;break;case"Upload":e.number=2,e.StepDatas[e.number-1].title=s;break;case"Completed":e.number=3,e.StepDatas[e.number-1].title=s;break;default:e.StepDatas[e.number-1].title=s,e.StepDatas[e.number-1].description="ERROR!请手动操作!"}})},unsubscribe:function(){W.unsubscribe("/logs","message")},getHistoryInfo:function(){var e=this;this.dialogTableVisible=!0;var t={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,pageNo:"1",pageSize:"1"};S(R.getHistoryInfo,t).then(function(t){var a=t.data.data;e.gridData=a.productionStnRecords,e.total=a.toalCount})},handleSizeChange:function(e){},handleCurrentChange:function(e){var t=this;this.dialogTableVisible=!0;var a={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,pageNo:e,pageSize:"1"};S(R.getHistoryInfo,a).then(function(e){var a=e.data.data;t.gridData=a.productionStnRecords,t.total=a.toalCount})},openCom:function(){try{var e=this,t=new SerialPort(JSON.parse(window.localStorage.getItem("serialPort")).port,{autoOpen:!1}),a=new(0,SerialPort.parsers.Readline);t.pipe(a),t.open(function(e){if(e)return console.log("Error opening port:",e.message);this.$message({message:"串口打开成功",type:"success"})}),a.on("data",function(t){e.code=t}),e.serialPort=t}catch(e){}finally{this.$message({message:"串口打开失败",type:"error"})}},closeCom:function(){try{if(this.serialPort.isOpen){this.serialPort.close(function(e){e?console.log(e):this.$message({message:"串口关闭成功",type:"sussess"})})}}catch(e){}finally{this.$message({message:"串口关闭失败",type:"error"})}},getSerialNoInformation:function(){var e=this,t={serialNo:this.code};S(R.getSerialNoInformation,t).then(function(t){"0"==t.data.returnCode?(e.gridData=t.data.data,e.productCount++,"0"==t.data.data.hotTest&&console.log(document.getElementById("ishotTest").style.display="flex")):document.getElementById("ishotTest").style.display=""})}}},Se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"assembleInsert"},[a("div",{staticClass:"convent"},[a("div",{staticClass:"convent-input"},[a("span",{staticStyle:{width:"8rem","font-size":"1.4rem","font-weight":"bold",color:"#000000"}},[e._v("发动机号")]),e._v(" "),a("el-input",{attrs:{autosize:{minRows:4,maxRows:4},size:"80"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.show(t)}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getSerialNoInformation()}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{type:"success"}},[e._v("已扫数量："+e._s(e.productCount))])],1),e._v(" "),a("div",{staticClass:"topbox"},[a("el-container",[a("el-aside",{attrs:{width:"60%"}},[a("div",{staticClass:"right-container"},[a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("订单编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.gridData.productOrderNum))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",{staticClass:"label"},[e._v("工单编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.gridData.productionOrderNum))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("label",{staticClass:"label"},[e._v("发动机号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.gridData.serialNo))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("产品描述")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.gridData.materialText))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("产品编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.gridData.materialCode))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("机型")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.gridData.productModel))])])],1)],1)])]),e._v(" "),a("el-main",[a("div",{staticClass:"progress"},[a("div",{staticClass:"container"},[a("el-steps",{ref:"steps",attrs:{direction:"vertical",active:e.number}},e._l(e.StepDatas,function(e,t){return a("el-step",{key:t,attrs:{icon:e.icon,title:e.title,description:e.description}})}))],1)])])],1)],1),e._v(" "),a("div",{staticClass:"icon-pad-history",on:{click:function(t){e.getHistoryInfo()}}}),e._v(" "),a("div",{staticClass:"history-info"},[a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"80%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.gridData}},[a("el-table-column",{attrs:{prop:"productOrderNum",label:"订单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productionOrderNum",label:"工单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productModel",label:"机型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialText",label:"物料描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quanlity",label:"计划数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"顺序号"}})],1),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[1],"page-size":1,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bottom-box"},[t("div",{attrs:{id:"ishotTest"}},[this._v("需要热试")])])}]};var Ie=a("VU/8")(ye,Se,!1,function(e){a("N5EC")},null,null).exports,Ne={data:function(){var e;return e={currentRow:"",productionOrderNum:"",tableData:[],motorData:[],gridData:[],code:"",productNo:"",productCount:0,dialogTableVisible:!1},be()(e,"currentRow",null),be()(e,"proinfo",{}),be()(e,"materialCode",""),e},beforeRouteLeave:function(e,t,a){this.closeCom(),a()},created:function(){},mounted:function(){this.openCom()},methods:{show:function(e){var t=this;if(13==e.keyCode){var a={serialNo:this.code};S(R.getSerialNoInformation,a).then(function(e){t.gridData=e.data.data})}},getOrderInfo:function(){var e=this,t={serialNo:this.code};S(R.getSerialNoInformation,t).then(function(t){console.log(t),e.proinfo=t.data.data,e.tableData.push(e.proinfo)})},getMaterialByCode:function(){var e=this,t={materialCode:this.materialCode};S(R.getMaterialByCode,t).then(function(t){var a=t.data.data;e.motorData.push(a)})},saveHistoryInfo:function(){var e=this,t={},a=[];console.log();for(var s=0;s<this.tableData.length;s++){var o=this.tableData[s];t.addressHex="",t.post=0,t.title="",t.materialCode=o.materialCode,t.motorLabel="",t.qty=this.tableData.length,t.workCenterCode=JSON.parse(localStorage.getItem("terminal")).workCenterCode,t.workStationCode=JSON.parse(localStorage.getItem("terminal")).workStationCode,t.motorNumber=o.serialNo,a.push(t)}var n={list:a};console.log(n),console.log(this.tableData),S(R.batchSavePartsData,n).then(function(t){console.log(t),e.tableData=[]})},getHistoryInfo:function(){var e=this;this.dialogTableVisible=!0,this.dialogTableVisible=!0;var t={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,pageNo:"1",pageSize:"1"};S(R.getHistoryInfo,t).then(function(t){console.log(t);var a=t.data.data;e.gridData=a.productionStnRecords})},openCom:function(){try{var e=this,t=new SerialPort(JSON.parse(window.localStorage.getItem("serialPort")).port,{autoOpen:!1}),a=new(0,SerialPort.parsers.Readline);t.pipe(a),t.open(function(e){if(e)return console.log("Error opening port:",e.message);this.$message({message:"窗口打开成功",type:"success"})}),a.on("data",function(t){e.code=t}),e.serialPort=t}catch(e){}finally{this.$message({message:"串口打开失败",type:"error"})}},closeCom:function(){try{if(this.serialPort.isOpen){this.serialPort.close(function(e){e?console.log(e):console.log("串口关闭成功")})}}catch(e){}finally{this.$message({message:"窗口关闭失败",type:"error"})}}}},Me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hottest"},[a("div",{staticClass:"convent"},[a("div",{staticClass:"convent-input"},[a("span",{staticStyle:{width:"11rem","font-size":"1.4rem",color:"rgb(0, 0, 0)","font-weight":"bold"}},[e._v("产品序列号")]),e._v(" "),a("el-input",{attrs:{autosize:{minRows:4,maxRows:4},size:"80"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.show(t)}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getOrderInfo()}}},[e._v("确定")])],1)]),e._v(" "),a("div",{staticClass:"topbox"},[a("div",{staticClass:"right-container",attrs:{id:"currentorder"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("工单编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.productionOrderNum))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("物料编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.materialCode))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("物料描述")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.materialText))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("产品机型")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.productModel))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("顺序号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.orderNo))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("计划数量")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.plannedQty))])])],1)],1)]),e._v(" "),a("div",{staticClass:"convent"},[a("div",{staticClass:"convent-input"},[a("span",{staticStyle:{width:"11rem","font-size":"1.4rem",color:"rgb(0, 0, 0)","font-weight":"bold"}},[e._v("物料条码")]),e._v(" "),a("el-input",{attrs:{autosize:{minRows:4,maxRows:4},size:"80"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.show(t)}},model:{value:e.materialCode,callback:function(t){e.materialCode=t},expression:"materialCode"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getMaterialByCode()}}},[e._v("确定")])],1)]),e._v(" "),a("div",{staticClass:"bottom-form"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.motorData,height:"200",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialText",label:"物料描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"siteCode",label:"物料条码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"扫描时间"}})],1)],1),e._v(" "),a("div",{staticClass:"icon-pad-history",on:{click:function(t){e.getHistoryInfo()}}}),e._v(" "),a("div",{staticClass:"icon-pad-save",on:{click:function(t){e.saveHistoryInfo()}}},[e._v("保存")]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"80%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("div",{staticClass:"linear-input"},[a("span",[e._v("发动机号")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",width:"300"},model:{value:e.productNo,callback:function(t){e.productNo=t},expression:"productNo"}}),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("确认")])],1),e._v(" "),a("div",{staticClass:"bottom-form"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"350",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"工单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"发动机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"机型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"产品编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"产品描述"}})],1)],1)])],1)},staticRenderFns:[]};var Oe=a("VU/8")(Ne,Me,!1,function(e){a("ygsj")},null,null).exports,Ee={data:function(){return{tableData:[],code:"",input:"",palletizedData:[],sequenceCount:0,dialogTableVisible:!1,dialogVisible:!1,isHistory:!1,isPrint:!1,gridData:[],pallinfo:"",total:0,serialPort:""}},beforeRouteLeave:function(e,t,a){this.closeCom(),a()},created:function(){},mounted:function(){this.openCom()},methods:{getHistoryInfo:function(){var e=this;this.isHistory=!0,1==this.isHistory&&(this.dialogTableVisible=!0);var t={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,pageNo:"1",pageSize:"1"};S(R.getHistoryInfo,t).then(function(t){console.log(t);var a=t.data.data;e.gridData=a.productionStnRecords})},getOrderInfo:function(){var e=this,t={serialNo:this.code};S(R.getSerialNoInformation,t).then(function(t){console.log(t);t.data.data;var a="";if("0"==t.data.returnCode){e.tableData.push(t.data.data),console.log(e.sequenceCount);var s=t.data.data.trayNumber;console.log(t.data.data),e.sequenceCount==s&&(e.printContent(),e.tableData=[]),a=localStorage.getItem("productOrderNums"),console.log(a),t.data.data.productOrderNum!=a&&null!==a&&(e.printContent(),localStorage.removeItem("productOrderNums")),localStorage.setItem("productOrderNums",t.data.data.productOrderNum),localStorage.setItem("sequenceCount",e.sequenceCount),e.sequenceCount=localStorage.getItem("sequenceCount"),e.sequenceCount++}})},replenishPrint:function(){var e=this;this.dialogVisible=!0;S(R.getPalletizedRecords,{palletBarCode:"evn1",pageNo:1,pageSize:3}).then(function(t){var a=t.data.data;e.palletizedData=a.palletizedRecords,e.total=a.toalCount,console.log(e.total)})},collectPall:function(){var e=this,t={palletBarCode:this.pallinfo,pageNo:1,pageSize:3};S(R.getPalletizedRecords,t).then(function(t){var a=t.data.data;e.palletizedData=a.palletizedRecords,e.total=a.toalCount,console.log(t)})},printContent:function(e){var t=document.getElementById("subOutputRank-print");console.log(t.innerHTML);var a=t.innerHTML,s=document.body.innerHTML;return document.body.innerHTML=a,window.print(),window.location.reload(),document.body.innerHTML=s,!1},openCom:function(){try{var e=this,t=new SerialPort(JSON.parse(window.localStorage.getItem("serialPort")).port,{autoOpen:!1}),a=new(0,SerialPort.parsers.Readline);t.pipe(a),t.open(function(e){if(e)return console.log("Error opening port:",e.message);this.$message({message:"串口打开成功",type:"success"})}),a.on("data",function(t){e.code=t}),e.serialPort=t}catch(e){}finally{this.$message({message:"串口打开失败",type:"error"})}},closeCom:function(){try{if(this.serialPort.isOpen){this.serialPort.close(function(e){e?console.log(e):this.$message({message:"串口关闭成功",type:"success"})})}}catch(e){}finally{this.$message({message:"串口关闭失败",type:"error"})}},show:function(e){var t=this;if(13==e.keyCode){var a={serialNo:this.code};S(R.getSerialNoInformation,a).then(function(e){t.gridData=e.data.data})}},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)}}},Re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"macheineWorkInsert"},[a("div",{staticClass:"convent"},[a("div",{staticClass:"convent-input"},[a("span",{staticStyle:{width:"11rem","font-size":"1.4rem",color:"rgb(0, 0, 0)","font-weight":"bold"}},[e._v("产品序列号")]),e._v(" "),a("el-input",{attrs:{autosize:{minRows:4,maxRows:4},size:"80"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.show(t)}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getOrderInfo()}}},[e._v("确定")])],1)]),e._v(" "),a("div",{staticClass:"bottom-form",staticStyle:{"margin-top":"1rem"}},[a("div",{attrs:{id:"subOutputRank-print"}},[a("el-table",{staticStyle:{width:"100%","font-size":"1.2rem","max-height":"500px"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productionOrderNum",label:"工单编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",prop:"materialCode",label:"物料编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serialNo",width:"240",label:"产品序列号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"备注"}})],1)],1)]),e._v(" "),a("div",{staticClass:"history-info"},[a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"80%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.gridData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialText",label:"物料描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quanlity",label:"产品序列号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"下线时间"}})],1),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[1],"page-size":1,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"80%",title:"托条码补打印"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"linear-input"},[a("span",[e._v("托条码")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",width:"300"},model:{value:e.pallinfo,callback:function(t){e.pallinfo=t},expression:"pallinfo"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.collectPall()}}},[e._v("确认")])],1),e._v(" "),a("el-table",{attrs:{data:e.palletizedData}},[a("el-table-column",{attrs:{type:"selection",width:"42"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",prop:"palletBarCode",label:"托条码",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialText",label:"物料描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roundtripTime",label:"装托时间"}})],1),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[1],"page-size":1,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"icon-pad-history",on:{click:function(t){e.getHistoryInfo()}}}),e._v(" "),a("div",{staticClass:"icon-pad-save",on:{click:function(t){e.replenishPrint()}}},[e._v("补打印")])],1)},staticRenderFns:[]};var Te=a("VU/8")(Ee,Re,!1,function(e){a("tFJo")},null,null).exports,De=a("zKIK"),ke={data:function(){return{centerDialogVisible:!1,productionOrderNum:"",tableData:[],gridData:[],proinfo:{},plannedQty:0,code:"",productCount:0,dialogTableVisible:!1,currentRow:null,count:null,serialPort:"",total:0}},beforeRouteLeave:function(e,t,a){this.closeCom(),a()},created:function(){this.getMachiningProductionQueue()},mounted:function(){this.openCom()},methods:be()({openCom:function(){try{var e=this,t=new SerialPort(JSON.parse(window.localStorage.getItem("serialPort")).port,{autoOpen:!1}),a=new(0,SerialPort.parsers.Readline);t.pipe(a),t.open(function(e){if(e)return console.log("Error opening port:",e.message);this.$message({message:"窗口打开成功",type:"success"})}),a.on("data",function(t){e.code=t}),e.serialPort=t}catch(e){}finally{this.$message({message:"串口打开失败",type:"error"})}},closeCom:function(){try{if(this.serialPort.isOpen){this.serialPort.close(function(e){e?console.log(e):console.log("串口关闭成功")})}}catch(e){}finally{this.$message({message:"窗口关闭失败",type:"error"})}},setCurrent:function(e){this.$refs.table.setCurrentRow(e)},validplannedQty:function(){this.productCount+this.count<this.plannedQty?this.validMachiningProductRecord():this.centerDialogVisible=!0},continueON:function(){this.centerDialogVisible=!1,this.validMachiningProductRecord()},onFinish:function(){var e=this;this.centerDialogVisible=!1;var t={productionOrderNum:this.productionOrderNum};this.$confirm("确认完成该工单？").then(function(a){S(R.updateMachiningProduction,t).then(function(t){"0"==t.data.returnCode&&e.getMachiningProductionQueue()})}).catch(function(e){})},validMachiningProductRecord:function(){var e=this,t={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,scanCode:this.code,productionOrderNum:this.productionOrderNum,qty:this.count};console.log(this.count),S(R.validMachiningProductRecord,t).then(function(t){console.log(t),"0"==t.data.returnCode&&e.getMachiningProductionQueue()})},getHistoryInfo:function(){var e=this;this.dialogTableVisible=!0;var t={workStationCode:JSON.parse(window.localStorage.getItem("terminal")).workStationCode,pageNo:"1",pageSize:"1"};S(R.getHistoryInfo,t).then(function(t){var a=t.data.data;e.gridData=a.productionStnRecords})},getMachiningProductionQueue:function(){var e=this,t={workCenterCode:JSON.parse(window.localStorage.getItem("terminal")).workCenterCode,endRow:4};S(R.getMachiningProductionQueue,t).then(function(t){e.tableData=t.data.data})},handleCurrentChange:function(e,t){var a=this;null!=e?(this.currentRow=e,this.proinfo=e,this.productCount=this.currentRow.scanQty,this.plannedQty=this.currentRow.plannedQty,this.productionOrderNum=this.currentRow.productionOrderNum):this.tableData.forEach(function(e,s,o){o[s].productionOrderNum==t.productionOrderNum&&a.setCurrent(a.tableData[s])})},handleSizeChange:function(e){console.log("每页 "+e+" 条")}},"handleCurrentChange",function(e){})},Ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crankshaftOnline"},[a("div",{staticClass:"convent"},[a("div",{staticClass:"convent-input"},[a("div",{staticClass:"input-left"},[a("span",{staticStyle:{width:"8rem","font-size":"1.4rem",color:"#000000","font-weight":"bold"}},[e._v("零件条码")]),e._v(" "),a("el-input",{attrs:{placeholder:"零件条码"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),a("div",{staticClass:"input-right"},[a("span",{staticStyle:{width:"4rem","font-size":"1.4rem",color:"#000000","font-weight":"bold"}},[e._v("数量")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入扫描数量"},model:{value:e.count,callback:function(t){e.count=t},expression:"count"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.validplannedQty()}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{type:"success"}},[e._v("已扫数量："+e._s(e.productCount))])],1),e._v(" "),a("div",{staticClass:"topbox"},[a("div",{staticClass:"right-container",attrs:{id:"currentorder"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("工单编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.productionOrderNum))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("物料编号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.materialCode))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("物料描述")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.materialText))])])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("产品机型")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.productModel))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("顺序号")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.orderNo))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("label",{staticClass:"label"},[e._v("计划数量")]),e._v(" "),a("div",{staticClass:"detail"},[e._v(e._s(e.proinfo.plannedQty))])])],1)],1)]),e._v(" "),a("div",{staticClass:"bottom-form"},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"orderNo",label:"顺序号",width:"240"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productionOrderNum",label:"工单编号",width:"230"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plannedQty",label:"计划数量",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"scanQty",label:"已扫数量",width:"190"}})],1)],1),e._v(" "),a("div",{staticClass:"history-info"},[a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"80%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.gridData}},[a("el-table-column",{attrs:{prop:"productOrderNum",label:"订单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productionOrderNum",label:"工单编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productModel",label:"机型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialCode",label:"物料编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialText",label:"物料描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quanlity",label:"计划数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"顺序号"}})],1),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[1],"page-size":1,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"注意",visible:e.centerDialogVisible,width:"50%",top:"30vh","show-close":!1,center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("span",[e._v("已扫数量超出计划数量")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.continueON()}}},[e._v("继续")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onFinish()}}},[e._v("完成")])],1)]),e._v(" "),a("div",{staticClass:"icon-pad-history",on:{click:function(t){e.getHistoryInfo()}}})],1)},staticRenderFns:[]};var Pe=a("VU/8")(ke,Ae,!1,function(e){a("uhh2")},null,null).exports;s.default.use(i.a);var Ue=new i.a({routes:[{path:"/",component:ne,redirect:"/login",children:[{path:"/system",component:ue,name:"系统配置"},{path:"/initialize",component:he,name:"初始化"},{path:"/online/assemblyOnline",component:ve,name:"装配上线"},{path:"/online/machineplusOnline",component:we,name:"机加上线"},{path:"/assembleInsert",component:Ie,name:"装配下线"},{path:"/hothost",component:Oe,name:"热试"},{path:"/MachineInsert",component:Te,name:"机加下线"},{path:"/online/crankshaftOnline",component:Pe,name:"曲轴上线"},{path:"/home",component:De.default,name:"首页"}]},{path:"/login",name:"login",component:k}]}),xe=(a("Xcu2"),a("NYxO"));s.default.use(xe.a);var Ve=new xe.a.Store({state:{menulist:[],title:"",timer1:""},mutations:{hideSearch:function(e){e.searchShow=!1}},getters:{},actions:{}}),Be={name:"navlist",props:["isMenuShow"],userName:"",computed:{MenuListData:function(){return JSON.parse(localStorage.getItem("list"))}},created:function(){this.userinfo()},data:function(){return{showColor:!0}},methods:{quit:function(){var e=this;S(R.logout).then(function(t){re.sessionClean(),clearInterval(e.$store.state.timer1),e.$router.push("/login")})},userinfo:function(){this.userName=sessionStorage.getItem("userCode")},getTitle:function(e){var t=this.$refs.menuTitle[e].innerText;this.$store.state.title=t,localStorage.setItem("title",t)}}},Le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"router-slid"}},[e.isMenuShow?a("div",{attrs:{id:"nav-menu-list"}},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"image"}),e._v(" "),a("span",[e._v(e._s(e.userName))])]),e._v(" "),a("ul",e._l(e.MenuListData,function(t,s){return a("li",{ref:"menuTitle",refInFor:!0,on:{click:function(t){e.getTitle(s)}}},[a("router-link",{attrs:{to:{name:t.menuText},tag:"div"}},[e._v("\n          "+e._s(t.menuText)+"\n        ")])],1)})),e._v(" "),a("button",{staticClass:"bottom-con"},[a("div",{staticStyle:{display:"flex"},on:{click:function(t){e.quit()}}},[a("span",{staticClass:"el-icon-pad-off"}),e._v("\n        退出登录\n      ")])])]):e._e()])},staticRenderFns:[]};var qe=a("VU/8")(Be,Le,!1,function(e){a("W30X")},"data-v-2914e853",null).exports;window.document.addEventListener("touchstart",function(e){},!1);var ze=function(e){e.component(qe.name,qe)};"undefined"!=typeof window&&window.Vue&&ze(window.Vue);var Qe={install:ze},Fe=a("kZvW"),He=a.n(Fe);s.default.use(He.a),s.default.use(He.a,{componentName:"scroll-seamless"}),s.default.config.productionTip=!1,s.default.use(Qe),s.default.use(y.a),new s.default({el:"#app",router:Ue,store:Ve,components:{App:n},template:"<App/>"})},SFkb:function(e,t){},VXQN:function(e,t,a){"use strict";var s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"aaa"},[t("div",{staticClass:"bbb"},[this._v("请联系管理员，设置首页！")])])}]};t.a=s},W30X:function(e,t){},Xcu2:function(e,t){},Z5UN:function(e,t){},bWjS:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAUCAYAAADiOEEgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjE5MEY1RTJGNDEyMDExRTdCQkM4QkQzMzlDMDVGRTk0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjE5MEY1RTMwNDEyMDExRTdCQkM4QkQzMzlDMDVGRTk0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTkwRjVFMkQ0MTIwMTFFN0JCQzhCRDMzOUMwNUZFOTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTkwRjVFMkU0MTIwMTFFN0JCQzhCRDMzOUMwNUZFOTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6kW5n1AAAD8klEQVR42syZa0hUQRTHZ1cN7YGJCEUaCL3o9aES7WnSy8yKjGqxDxW1H62giAoKi/BTWEl9KCoqisxM7EUkFRQ9ILEoe0eoZSHaix5q2+7e/iMTDae5e2f3XnH/8APnzL1n55575szMlRmGwUAeqAcBw57KhD+OC9SR/pvALV1jRTEISvf7wBCpv4D0t4N0Td+ZwC/d6xc2+Zrdimfkv1dk5f97zXlvQ/54o2nJVKMRNHlyOtyMsVngDBgNeNuOEqW/DfCY9E8BYzV99QKFwCXZGsEHqd2X9MeDBE3/vUGM1I4RNlmxivv47+0Aw0I5N377+iHq/9oBfzwPbqkYtBMKkvZJ0ua/t0TT10QwlNiqQDt5of89p6Z/nXvNfCWBI+RlWcWi6+FHM+dEs+qOyEZZBSYZQ7VM8eBnWfSIz9It4dygeuj3oDbCAVwm7U5wHqyTbCNABrhnMcXnE1s9eMiiS9tBDbgfabAPg2IHB1RBgs211CLY2SCV2CpVU7OHFSfKSSYpb0qpFsROhwfE3/oLYlsoFjPdEhIQ9bqn9Rm0ERsvwyWRZvZ08DLCwTwFr4jNLwK1VbKlg8ngusmOJo/Y6oTvnlaLmPUVxM5n7hVwNdxgzxFEohNghcJeKRYTF8leVbBnghRFKYoG9RWLdBlYS/oOgXHgUzhlxI7MtkqPBLLyTbacHtL2geooCbZL1GmeOM9J32CwL9ya3R0KKrZtA0EOsaWIQ5asu+BNlATbENWAL4ZrRImUtVwcxJSxdTrYoTb5VYrB0YUwl5xCo6mEMEUSqBZGXmKSMQV+sADWdZcrZM2+AY6GcRKj5cJML8TOZBIJLj+NfTEpITyDLrLo1S4wG2RJtmQev4SMKStjB6VtC3z6mMri4kyDfQ2c6qbBVZBgJ4vB8m8zg8ROSNZN0BzmNLdzXA9Xv8FqkUR9JPuCmJQBC5O9GwtbSzbeYkZsV4a7TTbq3aUL4JfJgpiv+BB0JoIFzKd5rd+hZ3oGNivsBxIysxv65S4uNdp/ItYuZWavAsNtBDNUgBrAbTBDsuUpMp7rm9i7WgWXtvmJ7oPGWIdo+NPVfjCXnA944pxOWlE0o/PJg1xfc+NIZjirco3vyF5NX+c0fBU6PP5pxP8e0t8EEkzGkgbaFD43dTyuHdu4KMvvVhyl7ahD45pLjK/U1irXuKbewbHzxfi1jfvfgSKFvSR+zATW3+Ndz9/IPNDpUGYc1/wvSbWFn1bQX9PXQYfGvl3hey+55m2IzP7LMYXvJ0YwmOgWn0U94kRk96vaN83ryi12Azz7v2r64tm0R3wkiuSQ0iI+le7UWEQDGruYDYpD2CiskMV/BBgAC6KCQiX9LQEAAAAASUVORK5CYII="},hAXs:function(e,t){},m5gs:function(e,t){},nfXI:function(e,t){},tFJo:function(e,t){},uhh2:function(e,t){},wxfT:function(e,t){},ygsj:function(e,t){},zKIK:function(e,t,a){"use strict";var s=a("SFkb"),o=a.n(s),n=a("VXQN");var i=function(e){a("BWMH")},r=a("VU/8")(o.a,n.a,!1,i,null,null);t.default=r.exports}},["NHnr"]);
//# sourceMappingURL=app.cf63da176915c60755de.js.map